# === Datasource Configuration ===
# Using existing PostgreSQL container from docker-compose (port 5439)
# If Testcontainers is working, it will override these settings
# Otherwise, fall back to the docker-compose PostgreSQL
spring.datasource.url=jdbc:postgresql://localhost:5439/gymcrm_test
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driver-class-name=org.postgresql.Driver

# === Flyway Configuration ===
spring.flyway.enabled=true
# Point to your main migrations folder
spring.flyway.locations=classpath:db/migration
# Allow Flyway to clean the schema (CRITICAL for component tests)
spring.flyway.clean-disabled=false

# === JPA / Hibernate ===
# Let Flyway handle the schema; Hibernate only validates it
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

eureka.client.enabled=false
eureka.client.register-with-eureka=false
eureka.client.fetch-registry=false

spring.activemq.broker-url=vm://localhost?broker.persistent=false
spring.activemq.user=admin
spring.activemq.password=admin

# Ensure the app doesn't try to connect to the real broker on startup
spring.jms.template.default-destination=trainer.workload.queue