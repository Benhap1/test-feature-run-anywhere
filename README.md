# GymCRM Monorepo

–ú–æ–Ω–æ-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏—Ç–Ω–µ—Å-–∫–ª—É–±–æ–º (Gym CRM), —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤ –≤–∏–¥–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ Spring Boot.

## –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:

| –°–µ—Ä–≤–∏—Å                        | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                   | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏                                      |
|-------------------------------|------|--------------------------------------------------------------------------------------------|-------------------------------------------------|
| **gym-crm-discovery**         | 8761 | –°–µ—Ä–≤–µ—Ä –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ (Eureka Server)                                                 | Spring Cloud Netflix Eureka Server              |
| **gym-crm-core-service** (gym-crm-service) | 8080 | –û—Å–Ω–æ–≤–Ω–æ–π –±–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ trainee/trainer/training   | Spring Boot, Spring Security (JWT), JPA, PostgreSQL, ActiveMQ, Swagger |
| **trainer-workload-service**  | 8081 | –°–µ—Ä–≤–∏—Å –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–µ–Ω–µ—Ä–æ–≤ (—Ö—Ä–∞–Ω–∏—Ç —Å—É–º–º–∞—Ä–Ω—ã–µ —á–∞—Å—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –ø–æ –º–µ—Å—è—Ü–∞–º/–≥–æ–¥–∞–º)     | Spring Boot, JMS (ActiveMQ), In-memory storage, Eureka Client |

–°–µ—Ä–≤–∏—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —á–µ—Ä–µ–∑:
- **Eureka** ‚Äì –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
- **ActiveMQ (JMS)** ‚Äì –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –≤ workload-—Å–µ—Ä–≤–∏—Å

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (Gym-crm-core-service)

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Trainee / Trainer)
- JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç brute-force –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é logout (blacklist —Ç–æ–∫–µ–Ω–æ–≤)
- CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ –ø—Ä–æ—Ñ–∏–ª—è–º–∏ Trainee –∏ Trainer
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–æ–≤ trainee
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–∏–ø–æ–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- –ü–æ–ª–Ω–∞—è OpenAPI (Swagger) –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Bearer-—Ç–æ–∫–µ–Ω–∞
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π transactionId –≤ –ª–æ–≥–∞—Ö

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ trainer-workload-service

- –ü—Ä–∏—ë–º —Å–æ–æ–±—â–µ–Ω–∏–π JMS –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–µ–Ω–µ—Ä–∞ –ø–æ –≥–æ–¥–∞–º –∏ –º–µ—Å—è—Ü–∞–º (–≤ –ø–∞–º—è—Ç–∏ ‚Äì ConcurrentHashMap)
- GET-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–µ–Ω–µ—Ä–∞
- DLQ –¥–ª—è –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Java 17**
- **Spring Boot 3.3.x**
- **Spring Cloud 2023.0.x** (Eureka)
- **PostgreSQL** (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å)
- **ActiveMQ** (–æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π)
- **Gradle** (multi-module? ‚Äì –≤ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç —Å–≤–æ–π build.gradle)
- **Docker** (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ multi-stage build)
- **Swagger / SpringDoc OpenAPI**
- **JWT + Spring Security**
- **Flyway** –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –ë–î

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
gymcrm-monorepo/
‚îú‚îÄ‚îÄ gym-crm-discovery/              # Eureka Server
‚îú‚îÄ‚îÄ gym-crm-core-service/           # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å (gym-crm-service)
‚îî‚îÄ‚îÄ trainer-workload-service/       # –°–µ—Ä–≤–∏—Å –Ω–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–µ–Ω–µ—Ä–æ–≤

## –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (—Å Docker Compose)
docker-compose up --build

## –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `docker-compose up` —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –∞–¥—Ä–µ—Å–∞–º:

- **Swagger UI –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞** (Gym CRM API)  
  [http://localhost:8080/swagger-ui.html](http://localhost:8080/swagger-ui.html)  


- **Swagger UI —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–µ–Ω–µ—Ä–æ–≤**  
  [http://localhost:8081/swagger-ui.html](http://localhost:8081/swagger-ui.html)


- **Eureka Dashboard** (—Å–µ—Ä–≤–µ—Ä –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤)  
  [http://localhost:8761](http://localhost:8761)


- **ActiveMQ Web Console** (–æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π)  
  [http://localhost:8161/admin](http://localhost:8161/admin)  
  –õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å: **admin/admin**


## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ gym-crm-core-service/src/main/resources/db/migration.
Flyway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–∏—Å–∞.
–í —Å—Ö–µ–º–µ —É–∂–µ –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω—ã —Ç–∏–ø—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫: Yoga, Crossfit, Boxing.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
JWT —Å HS512 –∏ –¥–æ–ª–≥–∏–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–ª—é—á–æ–º
–ó–∞—â–∏—Ç–∞ –æ—Ç brute-force (3 –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 5 –º–∏–Ω—É—Ç)
Logout —á–µ—Ä–µ–∑ blacklist —Ç–æ–∫–µ–Ω–∞
CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω —Å transactionId –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é API –≤ Swagger UI
–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∑–∞—â–∏—â—ë–Ω–Ω—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏, –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ –¥–ª—è –≤—Å–µ—Ö), –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Ö–æ–¥ –∏ –ø–æ–ª—É—á–∏—Ç—å JWT-—Ç–æ–∫–µ–Ω. –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Swagger –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä—É—á–∫–∏ —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã.
–û—Ç–∫—Ä–æ–π—Ç–µ Swagger UI –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:
http://localhost:8080/swagger-ui.html

## –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Trainee
–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —Ä–∞–∑–¥–µ–ª Authentication & Registration.
–í—ã–±–µ—Ä–∏—Ç–µ POST /api/auth/register/trainee.
–ù–∞–∂–º–∏—Ç–µ Try it out.
–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–ø—Ä–∏–º–µ—Ä):
{
"firstName": "Ivan",
"lastName": "Petrov",
"dateOfBirth": "1995-05-15",
"address": "Kyiv, Svyatoshin, 10"
}

–ù–∞–∂–º–∏—Ç–µ Execute.

–û—Ç–≤–µ—Ç (201 Created):
{
"username": "Ivan.Petrov",
"password": "cX7vK9pL2m"
}

–ó–∞–ø–∏—à–∏—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ username –∏ password ‚Äî –æ–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–ª—è –≤—Ö–æ–¥–∞.

## –®–∞–≥ 2: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Trainer
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ:

–í—ã–±–µ—Ä–∏—Ç–µ POST /api/auth/register/trainer.
Try it out.
–ü—Ä–∏–º–µ—Ä —Ç–µ–ª–∞:
{
"firstName": "Anna",
"lastName": "Sidorova",
"specialization": "Yoga"
}

(—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –æ–¥–Ω–æ–π –∏–∑ –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö: Yoga, Crossfit, Boxing)

Execute.
–û—Ç–≤–µ—Ç:
{
"username": "Anna.Sidorova",
"password": "fG4hJ8kN1q"
}
–ó–∞–ø–∏—à–∏—Ç–µ username –∏ password.

## –®–∞–≥ 3: –õ–æ–≥–∏–Ω –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞
–í—ã–±–µ—Ä–∏—Ç–µ POST /api/auth/login.
Try it out.
–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–æ–≥–æ –∏–∑ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):
{
"username": "Ivan.Petrov",
"password": "cX7vK9pL2m"
}

Execute.
–û—Ç–≤–µ—Ç (200 OK):
{
"token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJJdmFuLlBldHJvdiIsImlhdCI6MTczNTQ0MDAwMCwiZXhwIjoxNzM1NDQzNjAwfQ.xY..."
}

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è token (–ø–æ–ª–Ω–æ—Å—Ç—å—é, –±–µ–∑ –∫–∞–≤—ã—á–µ–∫).

## –®–∞–≥ 4: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Swagger UI

–í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã Swagger –Ω–∞–∂–º–∏—Ç–µ –∑–µ–ª—ë–Ω—É—é –∫–Ω–æ–ø–∫—É Authorize.
–í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –æ–∫–Ω–µ –≤ –ø–æ–ª–µ Value –≤–≤–µ–¥–∏—Ç–µ token.

–¢–µ–ø–µ—Ä—å —Ä—è–¥–æ–º —Å –∑–∞—â–∏—â—ë–Ω–Ω—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏ –ø–æ—è–≤–∏—Ç—Å—è –∏–∫–æ–Ω–∫–∞ –∑–∞–º–æ—á–∫–∞ üîí (–æ—Ç–∫—Ä—ã—Ç–∞—è), –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –∏–º–µ–Ω–∏ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
–ü–æ–ª—É—á–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (POST /api/training/add)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–æ–≤ trainee
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏ —Ç.–¥.

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

–¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç 1 —á–∞—Å (3600 —Å–µ–∫—É–Ω–¥). –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –Ω—É–∂–Ω–æ –∑–∞–Ω–æ–≤–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ª–æ–≥–∏–Ω.
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç –ª–∏—Ü–∞ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç—Ä–µ–Ω–µ—Ä–∞) ‚Äî –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ª–æ–≥–∏–Ω —Å –µ–≥–æ —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ —Å–Ω–æ–≤–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ Swagger.
Logout: POST /api/auth/logout —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º Authorization (–∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω).